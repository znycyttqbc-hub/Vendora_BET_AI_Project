from apify_client import ApifyClient

client = ApifyClient('apify_api_qdgaxPsFBaKO6zt4QEYDq6bolVqO3Q0d4Sb8')

def analyzuj_spravy():
    try:
        print("PripÃ¡jam sa k Apify s novÃ½m kÄ¾ÃºÄom...")

        # ZÃ­skame informÃ¡cie o tvojom ÃºÄte pre overenie
        me = client.user().get()
        print(f"âœ… ÃšspeÅ¡ne prihlÃ¡senÃ½ ako: {me['username']}")

        # ZÃ­skame poslednÃ½ beh tvojho ESPN scrapera
        last_run = client.actor("deloni/espn-football-news-scraper").last_run().get()
        if not last_run:
            print("âŒ NenaÅ¡iel sa Å¾iadny beh scrapera. Spusti ho na webe!")
            return

        # Stiahneme poloÅ¾ky z datasetu
        items = client.dataset(last_run['defaultDatasetId']).list_items().items

        print(f"--- NÃ¡jdenÃ½ch sprÃ¡v: {len(items)} ---")

        for idx, item in enumerate(items, 1):
            print(f"{idx}. ğŸ“¢ {item.get('Article_Title')}")
            if 'injury' in item.get('Article_Content', '').lower():
                print("   âš ï¸ VAROVANIE: ZistenÃ© zranenie v ÄlÃ¡nku!")

    except Exception as error:
        print(f"âŒ Chyba: {error}")

analyzuj_spravy()